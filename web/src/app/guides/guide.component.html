<h2>View Guide</h2>
<button type="button" class="btn btn-outline-secondary" [routerLink]="['/guides']">Back</button>
<div *ngIf="form" >
    <form novalidate (ngSubmit)="save()" [formGroup]="form">
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" class="form-control" id="name" formControlName="name"/>
        </div>
        <div class="form-group">
            <label for="notes">Description:</label>
            <textarea class="form-control" rows="3" formControlName="description"></textarea>
        </div>
        <hr>
        <div formArrayName="exercises">
            <button type="button" class="btn btn-outline-secondary" (click)="addExercise()">Add Exercise</button>
            <br>
            <br>
            <div class="card" *ngFor="let exercise of form.controls.exercises.controls; let i=index;">
                <div class="card-header">
                    Exercise #{{i + 1}}
                </div>
                <div class="card-block">
                    <div [formGroupName]="i">
                        <div class="form-group">
                            <label>Name:</label>
                            <input type="text" class="form-control"  formControlName="name"/>
                        </div>
                        <div class="form-group">
                            <label>Type:</label>
                            <select formControlName="type">
                                <option *ngFor="let exerciseType of exerciseTypes" [value]="exerciseType.value">
                                    {{exerciseType.display}}
                                </option>
                            </select>
                        </div>
                        <guide-sided-selector *ngIf="showSidedSelector(exercise)" formControlName="sided"></guide-sided-selector>
                        <input type="hidden" formControlName="_id"/>
                    </div>
                    <button type="button" class="btn btn-primary" (click)="removeExercise(i);">Remove</button>
                </div>
            </div>
            <button type="button" class="btn btn-outline-secondary" (click)="addExercise()">Add Exercise</button>
        </div>
        <hr>

        <input type="hidden" formControlName="_id" />
        <input type="hidden" formControlName="createdAt" />
        <button type="submit" class="btn btn-primary">Save</button>
        <button type="button" class="btn btn-primary" (click)="delete()" [hidden]="!form.value._id">Delete</button>
    </form>
</div>